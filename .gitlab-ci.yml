image: node:8.11.3

staging:
  stage: deploy
  script:
    - yarn
    - yarn build
    - mkdir ~/.ssh
    - touch ~/.ssh/id_rsa
    - echo "-----BEGIN RSA PRIVATE KEY-----
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
-----END RSA PRIVATE KEY-----" > ~/.ssh/id_rsa
    - git checkout master
    - git checkout dev
    - git remote rm origin
    - git remote add origin git@gitlab.com:manuscript/surix/app-service.git
    - git add .
    - git config --global user.email "nderitukelvin19@gmail.com"
    - git config --global user.name "CI"
    - git commit -m 'Production Build...'
    - git push origin dev
  only:
  - dev
